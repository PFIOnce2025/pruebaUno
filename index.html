<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Consulta de Calificaciones - IEM Técnico Industrial</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React, ReactDOM y Babel -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>

  <!-- PapaParse (opcional si usas CSV) -->
  <script src="https://unpkg.com/papaparse@latest/papaparse.min.js"></script>

  <!-- Tu archivo JS con los datos -->
  <script src="datos_notas.js"></script>
</head>
<body class="bg-gray-100 min-h-screen py-8">
  <div id="root" class="max-w-7xl mx-auto px-4"></div>

  <script type="text/babel">
    // Asumiendo que datosNotas ya está definido globalmente desde datos_notas.js

    const gradeDescriptions = {
      DS: "Desempeño Superior",
      DA: "Desempeño Alto",
      DB: "Desempeño Básico",
      DBJ: "Desempeño Bajo"
    };

    const GradeCard = ({ student, group }) => {
      const nombre = student.Estudiante;
      const materias = Object.entries(student).filter(
        ([key]) => !["Estudiante", "mRep", "pEst"].includes(key)
      );

      return (
        <div className="bg-white rounded-lg shadow p-4 mb-6">
          <h2 className="text-xl font-bold text-gray-800 mb-2">{nombre}</h2>
          <p className="text-sm text-gray-600 mb-2">Grupo: {group}</p>
          <div className="grid grid-cols-2 md:grid-cols-3 gap-2 text-sm">
            {materias.map(([materia, nota]) => (
              <div key={materia}>
                <span className="font-medium">{materia}:</span>{" "}
                {gradeDescriptions[nota] || nota}
              </div>
            ))}
          </div>
          <div className="mt-2 text-sm">
            <p><strong>Materias Reprobadas:</strong> {student.mRep === "-" ? "0" : student.mRep}</p>
            <p><strong>Promedio Estudiante:</strong> {student.pEst}</p>
          </div>
        </div>
      );
    };

    const App = () => {
      return (
        <div>
          <h1 className="text-3xl font-bold text-center text-gray-800 mb-6">
            Calificaciones - Todos los Estudiantes
          </h1>
          <p className="text-center text-gray-600 mb-8">Período 2 - 2024</p>
          {Object.entries(datosNotas).map(([grupo, estudiantes]) => (
            <div key={grupo}>
              <h2 className="text-2xl font-semibold text-blue-700 mt-10 mb-4">Grupo {grupo}</h2>
              {estudiantes.map((estudiante, idx) => (
                <GradeCard key={idx} student={estudiante} group={grupo} />
              ))}
            </div>
          ))}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
